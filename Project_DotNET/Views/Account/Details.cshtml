@{
    ViewBag.Title = "Détails";
}

<h2>@ViewBag.Title</h2>
<div>
    <h4>Informations</h4><br />
    <p>Mettre les infos (nom, prénom, email,etc....)</p><br />

    <h4>Expériences précédentes <button onclick="addJob()">Ajouter une expérience</button></h4> <br />
    <table id="list" class="table table-striped table-hover dt-responsive">
        <thead>
            <tr>
                <td>Début de la période</td>
                <td>Fin de la période</td>
                <td>Métier exercé</td>
                <td>Entreprise</td>
                <td>Ville</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>@ViewBag.user.firstDay.ToString("dd MMM yyyy")</td>
                <td>En cours</td>
                <td>@ViewBag.user.Job.JobName</td>
                <td>@ViewBag.user.Company.CompanyName</td>
                <td>@ViewBag.user.Company.city</td>
            </tr>
            @foreach (var period in ViewBag.user.Periods)
            {
                <tr>
                    <td>@period.debut.ToString("dd MMM yyyy")</td>
                    <td>@period.fin.ToString("dd MMM yyyy")</td>
                    <td>@period.Job.JobName</td>
                    <td>@period.Company.CompanyName</td>
                    <td>@period.Company.city</td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section css{
    <link href="//cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css" rel="stylesheet" />
}

@section scripts{
    <script src="//cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#list").DataTable();

            $("#list tbody button").click(function () {
                window.location.href = '/Account/AppUser/' + $(this)[0].value;
            });
        })
        function addJob() {
            window.location.href = '/Manage/AddJobToUser';
        }
    </script>
}